import{r as s,j as e}from"./index-DueDyOkR.js";const r={bg:"#0a0a0a",bg2:"#111",bg3:"#1a1a1a",text:"#e8e6e3",text3:"#666",gold:"#f5a623",red:"#ff4444",border:"rgba(255,255,255,0.06)"};function D(){const[l,n]=s.useState("loading"),[h,i]=s.useState(""),[f,y]=s.useState(""),[o,v]=s.useState("signup"),[p,g]=s.useState(""),[a,w]=s.useState(""),[b,k]=s.useState(""),[c,u]=s.useState(!1),x=new URLSearchParams(window.location.search),m=x.get("token")||"",S=x.get("type")||"signup";s.useEffect(()=>{if(!m){n("error"),i("Invalid verification link");return}v(S==="reset"?"reset":"signup"),fetch("/api/auth/verify-token?token="+m).then(t=>t.json()).then(t=>{t.valid?(y(t.email),g(t.email.split("@")[0]),n("form")):(n("error"),i(t.error||"Invalid or expired link"))}).catch(()=>{n("error"),i("Connection error")})},[]);const N=async()=>{if(!a){i("Please enter a password");return}if(a.length<6){i("Password must be at least 6 characters");return}if(a!==b){i("Passwords do not match");return}i(""),u(!0);try{if(o==="signup"){const t=await fetch("/api/auth/complete-signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:m,display_name:p.trim()||f.split("@")[0],password:a})}),d=await t.json();if(!t.ok){i(d.error||"Failed"),u(!1);return}localStorage.setItem("tordai_auth_token",d.token),n("success"),setTimeout(()=>{window.location.href="/tordai"},2e3)}else{const t=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:m,password:a})}),d=await t.json();if(!t.ok){i(d.error||"Failed"),u(!1);return}n("success"),setTimeout(()=>{window.location.href="/tordai"},2e3)}}catch{i("Connection error"),u(!1)}};return e.jsxDEV("div",{style:{minHeight:"100vh",background:r.bg,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"'Space Grotesk', sans-serif"},children:e.jsxDEV("div",{style:{maxWidth:400,width:"92%",padding:24},children:[e.jsxDEV("div",{style:{textAlign:"center",marginBottom:28},children:[e.jsxDEV("div",{style:{fontFamily:"'Orbitron', sans-serif",fontSize:24,fontWeight:700,color:r.gold,letterSpacing:2},children:"TORD AI"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:82,columnNumber:11},this),e.jsxDEV("div",{style:{fontSize:10,color:r.text3,letterSpacing:1,marginTop:4},children:"POWERED BY TORDLABS"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:83,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:81,columnNumber:9},this),e.jsxDEV("div",{style:{background:r.bg2,border:`1px solid ${r.border}`,borderRadius:14,padding:28},children:[l==="loading"&&e.jsxDEV("div",{style:{textAlign:"center"},children:[e.jsxDEV("div",{style:{width:36,height:36,border:"3px solid rgba(245,166,35,0.2)",borderTop:`3px solid ${r.gold}`,borderRadius:"50%",animation:"spin 0.8s linear infinite",margin:"0 auto 14px"}},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:89,columnNumber:15},this),e.jsxDEV("div",{style:{color:r.text,fontSize:13},children:"Verifying your link..."},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:88,columnNumber:13},this),l==="form"&&e.jsxDEV("div",{children:[e.jsxDEV("h2",{style:{color:r.text,fontSize:17,fontWeight:700,textAlign:"center",margin:"0 0 6px"},children:o==="signup"?"Complete your account":"Reset your password"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:96,columnNumber:15},this),e.jsxDEV("div",{style:{fontSize:12,color:r.text3,textAlign:"center",marginBottom:20},children:f},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:99,columnNumber:15},this),o==="signup"&&e.jsxDEV("div",{style:{marginBottom:12},children:[e.jsxDEV("label",{style:{fontSize:11,color:r.text3,display:"block",marginBottom:4},children:"Display Name"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("input",{type:"text",value:p,onChange:t=>g(t.target.value),style:{width:"100%",padding:"10px 12px",background:r.bg3,border:`1px solid ${r.border}`,borderRadius:8,color:r.text,fontSize:13,fontFamily:"'Space Grotesk', sans-serif",outline:"none",boxSizing:"border-box"}},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:104,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:102,columnNumber:17},this),e.jsxDEV("div",{style:{marginBottom:12},children:[e.jsxDEV("label",{style:{fontSize:11,color:r.text3,display:"block",marginBottom:4},children:o==="reset"?"New Password":"Password"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:110,columnNumber:17},this),e.jsxDEV("input",{type:"password",value:a,onChange:t=>w(t.target.value),placeholder:"Min 6 characters",style:{width:"100%",padding:"10px 12px",background:r.bg3,border:`1px solid ${r.border}`,borderRadius:8,color:r.text,fontSize:13,fontFamily:"'Space Grotesk', sans-serif",outline:"none",boxSizing:"border-box"}},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:111,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:109,columnNumber:15},this),e.jsxDEV("div",{style:{marginBottom:16},children:[e.jsxDEV("label",{style:{fontSize:11,color:r.text3,display:"block",marginBottom:4},children:"Confirm Password"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:116,columnNumber:17},this),e.jsxDEV("input",{type:"password",value:b,onChange:t=>k(t.target.value),onKeyDown:t=>{t.key==="Enter"&&N()},style:{width:"100%",padding:"10px 12px",background:r.bg3,border:`1px solid ${r.border}`,borderRadius:8,color:r.text,fontSize:13,fontFamily:"'Space Grotesk', sans-serif",outline:"none",boxSizing:"border-box"}},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:117,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:115,columnNumber:15},this),h&&e.jsxDEV("div",{style:{color:r.red,fontSize:12,marginBottom:12,textAlign:"center"},children:h},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:122,columnNumber:25},this),e.jsxDEV("button",{onClick:N,disabled:c,style:{width:"100%",padding:12,background:"linear-gradient(135deg, #f5a623, #d4891a)",border:"none",borderRadius:8,color:"#000",fontWeight:700,fontSize:14,fontFamily:"'Space Grotesk', sans-serif",cursor:c?"not-allowed":"pointer",opacity:c?.6:1},children:c?"Please wait...":o==="signup"?"Create Account":"Set New Password"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:124,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:95,columnNumber:13},this),l==="success"&&e.jsxDEV("div",{style:{textAlign:"center"},children:[e.jsxDEV("div",{style:{width:48,height:48,borderRadius:"50%",background:"rgba(0,200,83,0.12)",border:"2px solid rgba(0,200,83,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 14px"},children:e.jsxDEV("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#00c853",strokeWidth:"2.5",children:e.jsxDEV("polyline",{points:"20 6 9 17 4 12"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:134,columnNumber:112},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:134,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:133,columnNumber:15},this),e.jsxDEV("div",{style:{color:r.text,fontSize:16,fontWeight:600,marginBottom:6},children:o==="signup"?"Account created!":"Password updated!"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:136,columnNumber:15},this),e.jsxDEV("div",{style:{color:r.text3,fontSize:12},children:"Redirecting to Tord AI..."},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:139,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:132,columnNumber:13},this),l==="error"&&e.jsxDEV("div",{style:{textAlign:"center"},children:[e.jsxDEV("div",{style:{width:48,height:48,borderRadius:"50%",background:"rgba(255,68,68,0.12)",border:"2px solid rgba(255,68,68,0.3)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 14px"},children:e.jsxDEV("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:r.red,strokeWidth:"2.5",children:[e.jsxDEV("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:146,columnNumber:113},this),e.jsxDEV("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:146,columnNumber:151},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:146,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:145,columnNumber:15},this),e.jsxDEV("div",{style:{color:r.text,fontSize:15,fontWeight:600,marginBottom:6},children:"Link expired or invalid"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:148,columnNumber:15},this),e.jsxDEV("div",{style:{color:r.red,fontSize:12,marginBottom:18},children:h},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:149,columnNumber:15},this),e.jsxDEV("a",{href:"/tordai",style:{color:r.gold,fontSize:13,textDecoration:"none",fontWeight:600},children:"Go to Tord AI â†’"},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:150,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:144,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:86,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:80,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/workspace/client/src/pages/auth-verify.tsx",lineNumber:79,columnNumber:5},this)}export{D as default};
